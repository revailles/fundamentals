<html>
<body>
 
<script>
  
  //Market v 1.3

var apel = 10000
var anggur = 15000
var jeruk = 20000

alert("Welcome to the Market")

var stockApel = 100
var stockAnggur = 100
var stockJeruk = 100
alert("List of fruits : \nI. Apel \nII. Anggur \nIII. Jeruk")
do{
    var qtyApel = prompt(`Please enter the amount of Apel you wish to buy \n Price : Rp. ${apel} \n Stock : ${stockApel}`);
        if ( qtyApel > stockApel || qtyApel < 0 || isNaN (qtyApel) ) {
            alert(`We're sorry, but we only got ${stockApel} left, so you can only buy ${stockApel} ammount of Apel`)
    }
} while ( qtyApel > stockApel || qtyApel < 0 || isNaN(qtyApel) )


do{
    var qtyAnggur = prompt(`Please enter the amount of Anggur you wish to buy \n Price : Rp. ${anggur} \n Stock : ${stockAnggur}`);
        if ( qtyAnggur > stockAnggur || qtyAnggur < 0 || isNaN (qtyAnggur) ) {
            alert(`We're sorry, but we only got ${stockAnggur} left, so you can only buy ${stockAnggur} ammount of Anggur`)
    }
} while ( qtyAnggur > stockAnggur || qtyAnggur < 0 || isNaN (qtyAnggur));   

do{
    var qtyJeruk = prompt(`Please enter the amount of Jeruk you wish to buy \n Price : Rp. ${jeruk} \n Stock : ${stockJeruk}`);
        if ( qtyJeruk > stockJeruk || qtyJeruk < 0 || isNaN (qtyJeruk) ) {
            alert(`We're sorry, but we only got ${stockJeruk} left, so you can only buy ${stockJeruk} ammount of Anggur`)
    }
} while ( qtyJeruk > stockJeruk || qtyJeruk < 0 || isNaN (qtyJeruk) );

var totalApel = qtyApel * apel
var totalAnggur = qtyAnggur * anggur
var totalJeruk = qtyJeruk * jeruk

var total = totalApel + totalAnggur + totalJeruk

do {
    alert(`Your bill \nI. Apel : Rp. ${totalApel} \nI. Anggur : Rp. ${totalAnggur} \nI. Jeruk : Rp. ${totalJeruk}`)   
    var transaction = prompt(`Please purchase the following ammount = Rp ${total}`)
    var purchase = Number(transaction)   
    if ( purchase > total ){
        var change = purchase - total
    alert(`Congratulations, transaction success, here is your change : Rp ${change}`)
    }
    if ( purchase == total){
        alert("Congratulations, transaction success")
    }
    else {
     alert(`Insufficient balance, please pay the right ammount of money (Rp ${total}) `)
    }
}   while( purchase < total || isNaN (purchase) );
</script>


</body>
</html>
